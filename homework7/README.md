# [AI對話](https://chatgpt.com/c/6954c57b-407c-8320-bb8a-df38689c1020)
# z-test / t-test 檢定總結（README.md）

整理常見的假設檢定：  
- **z-test（單樣本）**  
- **t-test（單樣本）**  
- **t-test（雙樣本獨立）**  
- **t-test（雙樣本配對）**  

重點放在「何時使用」、「統計量公式」、「假設條件」與「實作注意事項」。

---

## 一、z-test（單樣本）

### 使用情境
- 母體平均數 **μ₀ 已知**
- 母體標準差 **σ 已知**
- 樣本來自常態母體，或樣本數足夠大（n ≥ 30）

### 假設
- H₀：μ = μ₀  
- H₁：μ ≠ μ₀（或 > μ₀、< μ₀）

### 統計量
\[
z = \frac{\bar{x} - \mu_0}{\sigma / \sqrt{n}}
\]

### 分配
- 標準常態分配 \(N(0,1)\)

### 注意
- **σ 必須是真正的母體標準差**  
- 若 σ 不知道，請改用 t-test（單樣本）

---

## 二、t-test（單樣本）

### 使用情境
- 母體平均數 **μ₀ 已知**
- 母體標準差 **未知**
- 以樣本標準差 s 估計

### 假設
- H₀：μ = μ₀  
- H₁：μ ≠ μ₀（或 > μ₀、< μ₀）

### 統計量
\[
t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}}
\]

### 分配
- t 分配，自由度 \(df = n - 1\)

### 注意
- 樣本數小時，t 分配尾巴較厚  
- n 越大，t 分配越接近常態分配

---

## 三、t-test（雙樣本獨立）

### 使用情境
- 兩組樣本 **彼此獨立**
- 例如：A 班 vs B 班、實驗組 vs 對照組

### 假設
- H₀：μ₁ = μ₂  
- H₁：μ₁ ≠ μ₂（或 >、<）

---

### (A) Welch’s t-test（建議使用）

不假設兩組變異數相等。

#### 統計量
\[
t = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}}
\]

#### 自由度（Welch–Satterthwaite）
\[
df \approx 
\frac{\left(\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}\right)^2}
{\frac{s_1^4}{n_1^2(n_1-1)} + \frac{s_2^4}{n_2^2(n_2-1)}}
\]

#### 優點
- 對變異數不等更穩健  
- 實務上**預設首選**

---

### (B) Pooled t-test（變異數相等）

需假設兩組母體變異數相同。

#### pooled 變異數
\[
s_p^2 = \frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1+n_2-2}
\]

#### 統計量
\[
t = \frac{\bar{x}_1 - \bar{x}_2}{s_p \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}}
\]

#### 自由度
\[
df = n_1 + n_2 - 2
\]

---

## 四、t-test（雙樣本配對）

### 使用情境
- **同一個體** 在不同時間或條件下測量
- 例如：治療前 / 治療後、訓練前 / 訓練後

### 核心想法
先計算差值：
\[
d_i = x_{after,i} - x_{before,i}
\]

再對差值做 **單樣本 t-test**

### 假設
- H₀：μ_d = 0  
- H₁：μ_d ≠ 0（或 >、<）

### 統計量
\[
t = \frac{\bar{d}}{s_d / \sqrt{n}}
\]

### 自由度
- \(df = n - 1\)

### 注意
- 兩組資料必須 **一一對應**
- 樣本數必須相同

---

## 五、alternative（檢定方向）

- `two-sided`：雙尾檢定（μ ≠ μ₀）
- `greater`：右尾檢定（μ > μ₀）
- `less`：左尾檢定（μ < μ₀）

---

## 六、選擇檢定快速表

| 情境 | 建議檢定 |
|----|----|
| σ 已知、μ₀ 已知 | z-test（單樣本） |
| σ 未知、μ₀ 已知 | t-test（單樣本） |
| 兩組不同個體 | t-test（雙樣本獨立，Welch） |
| 同一個體前後測 | t-test（配對） |

---

## 七、重要提醒

1. **不要濫用 z-test**：σ 不知道時請用 t-test  
2. **獨立 vs 配對要分清楚**：錯用會嚴重影響結論  
3. 樣本若明顯非常態且樣本數小，需考慮非參數方法  
4. p-value 只代表「反對 H₀ 的證據強度」，不等於效果大小  

---
